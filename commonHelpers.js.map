{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst gallery = document.querySelector('.gallery')\n\n let lightbox = new SimpleLightbox('.gallery a', \n    {docClose: true,\n    close: true,})\n\nexport function renderImage(images) {\n    if (images.length === 0) {\n        iziToast.show({\n            message: 'Sorry, there are no images matching your search query. Please try again!'\n          });\n        gallery.innerHTML = \"\";\n      }\n      else {\n    const listItems = images\n    .map(({largeImageURL, webformatURL, tags, likes, views, comments, downloads}) => `<li class=\"list\">\n  <a href=\"${largeImageURL}\">\n    <img src='${webformatURL}' alt='${tags}'/>\n    <div class=\"item-wrap\">\n    <h2 class=\"item-text\">Like<p>${likes}</p></h2>\n    <h2 class=\"item-text\">Views<p>${views}</p></h2>\n    <h2 class=\"item-text\">Comments<p>${comments}</p></h2>\n    <h2 class=\"item-text\">Downloads<p>${downloads}</p></h2>\n  </div>\n  </li>`)\n    .join(\"\");\n\n  gallery.innerHTML = listItems;\nif (lightbox){\n  lightbox.refresh();}\n  else {lightbox}\n  }}\n\n \n\n","import axios from \"axios\";\n\n// // const loader = document.querySelector('.loader')\n\n// // export function getPicturesByQuery(query) {\n// // const KEY = '44791676-0ec883c6e453828f8c76360bc';\n// //   return fetch(\n// //     `https://pixabay.com/api/?key=${KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`\n// //   ).then((res) => {\n// //     console.log(res);\n\n// //     if (!res.ok) {\n// //       throw new Error(res.status);\n// //     }\n// //     return res.json();\n// //   });\n// // }\n\nconst BASE_URL = 'https://pixabay.com';\nconst ENDPOINT = 'api/';\nconst KEY = '44791676-0ec883c6e453828f8c76360bc';\n\n\naxios.defaults.baseURL = BASE_URL;\n\nexport function getPicturesByQuery({q = '', page = 1, pageSize = 15} = {}) {\n\n  return axios.get(ENDPOINT, {\n    params: {\nkey: KEY,\nq,\npage,\nper_page: pageSize,\nimage_type: 'photo',\norientation: 'horizontal',\nsafesearch: true\n  }})\n  .then(({data}) => data)\n  .catch(err => {console.log(err)})\n}\n\n","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { renderImage } from \"./js/render-functions\";\nimport { getPicturesByQuery } from \"./js/pixabay-api\";\n\nconst form = document.querySelector(\"form\")\nconst gallery = document.querySelector('.gallery')\nconst loader = document.querySelector('.loader')\nconst loadButton = document.querySelector('.button-load')\nconst spinner = document.querySelector('.spinner')\n\nhide(loadButton);\n\nform.addEventListener('submit', handlerForm)\n\nconst params = {\n  q: '',\npage: 1,\npageSize:  15,\nmaxPage: 0,\n}\n\nasync function handlerForm (evt){\n    evt.preventDefault()\n    gallery.innerHTML = \"\";\n    params.page = 1; \n  params.q = form.elements.search.value.trim();\n\n   if (!params.q) {\n    iziToast.error({\n      title: 'Рядок не може бути пустим',\n    });\n    return;}\n\n    show(loadButton);\n    disable(loadButton,loader);\n\n    try{\nconst {hits, total} = await getPicturesByQuery(params);\nparams.maxPage = Math.ceil(total / params.pageSize)\nrenderImage(hits);\n\nif(hits.length > 0 && hits.length !== total) {\nenable(loadButton, loader);\nloadButton.addEventListener('click', handleLoadMore)\n}\nelse {\n  hide(loadButton);\n}\n\n    }\n    catch (err) {\n\n    }\n     finally {\nform.reset()\n     }\n    // loader.style.display = 'block';\n// getPicturesByQuery(inputValue)\n// .then(data => {renderImage(data.hits)\n// })\n// .catch((err)=>console.log(err))\n// .finally(() => {\n//   loader.style.display = 'none'\n// })\n}\n\nasync function handleLoadMore(evt) {\n  params.page += 1;\ndisable(loadButton, loader);\n\ntry {\n  const {hits} = await getPicturesByQuery(params);\nrenderImage(hits);\n\nconst list = document.querySelector('.list');\nconst listHeight = list.getBoundingClientRect().height;\nwindow.scrollBy({\n  top:listHeight * 4,\n  behavior: \"smooth\"\n})\n}\ncatch (err) {\nconsole.log(err);\n}\nfinally {\n  enable(loadButton, loader) \nif(params.page === params.maxPage) {\n  console.log(\"We're sorry, but you've reached the end of search results.\");\n  hide(loadButton);\n  loadButton.removeEventListener('click', handleLoadMore);\n}\n}\n}\n\n\nfunction hide(loadButton){\nloadButton.classList.add('is-hidden');\n}\n\nfunction show (loadButton) {\n  loadButton.classList.remove('is-hidden');\n}\n\nfunction disable (loadButton, loader) {\nloadButton.disabled = true;\n        loader.style.display = 'block';\n}\n\nfunction enable(loadButton, loader) {\n  loadButton.disabled = false;\n        loader.style.display = 'none';\n}"],"names":["gallery","lightbox","SimpleLightbox","renderImage","images","iziToast","listItems","largeImageURL","webformatURL","tags","likes","views","comments","downloads","BASE_URL","ENDPOINT","KEY","axios","getPicturesByQuery","q","page","pageSize","data","err","form","loader","loadButton","hide","handlerForm","params","evt","show","disable","hits","total","enable","handleLoadMore","listHeight"],"mappings":"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"}