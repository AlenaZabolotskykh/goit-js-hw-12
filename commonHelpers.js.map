{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst gallery = document.querySelector('.gallery')\n\n let lightbox = new SimpleLightbox('.gallery a', \n    {docClose: true,\n    close: true,})\n\nexport function renderImage(images) {\n    if (images.length === 0) {\n        iziToast.show({\n            message: 'Sorry, there are no images matching your search query. Please try again!'\n          });\n        gallery.innerHTML = \"\";\n      }\n      else {\n    const listItems = images\n    .map(({largeImageURL, webformatURL, tags, likes, views, comments, downloads}) => `<li class=\"list\">\n  <a href=\"${largeImageURL}\">\n    <img src='${webformatURL}' alt='${tags}'/>\n    <div class=\"item-wrap\">\n    <h2 class=\"item-text\">Like<p>${likes}</p></h2>\n    <h2 class=\"item-text\">Views<p>${views}</p></h2>\n    <h2 class=\"item-text\">Comments<p>${comments}</p></h2>\n    <h2 class=\"item-text\">Downloads<p>${downloads}</p></h2>\n  </div>\n  </li>`)\n    .join(\"\");\n\n  gallery.insertAdjacentHTML('beforeend', listItems);\nif (lightbox){\n  lightbox.refresh();}\n  else {lightbox}\n  }}\n\n \n\n","import axios from \"axios\";\n\n\n\nconst BASE_URL = 'https://pixabay.com';\nconst ENDPOINT = 'api/';\nconst KEY = '44791676-0ec883c6e453828f8c76360bc';\n\n\naxios.defaults.baseURL = BASE_URL;\n\nexport function getPicturesByQuery({q = '', page = 1, pageSize = 15} = {}) {\n\n  return axios.get(ENDPOINT, {\n    params: {\nkey: KEY,\nq,\npage,\nper_page: pageSize,\nimage_type: 'photo',\norientation: 'horizontal',\nsafesearch: true\n  }})\n  .then(({data}) => data)\n  .catch(err => {console.log(err)})\n}\n\n","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { renderImage } from \"./js/render-functions\";\nimport { getPicturesByQuery } from \"./js/pixabay-api\";\n\nconst form = document.querySelector(\"form\")\nconst gallery = document.querySelector('.gallery')\nconst loader = document.querySelector('.loader')\nconst loadButton = document.querySelector('.button-load')\nconst spinner = document.querySelector('.spinner')\n\nhide(loader);\nhide(loadButton)\n\nform.addEventListener('submit', handlerForm)\nloadButton.addEventListener('click', handleLoadMore);\n\nconst params = {\n  q: '',\npage: 1,\npageSize:  15,\nmaxPage: 0,\n}\n\nasync function handlerForm (evt){\n    evt.preventDefault()\n    gallery.innerHTML = \"\";\n    params.page = 1; \n  params.q = form.elements.search.value.trim();\n\n   if (!params.q) {\n    iziToast.error({\n      title: 'Рядок не може бути пустим',\n    });\n    return;}\n\n    show(loader);\n    hide(loadButton);\n\n    try{\nconst {hits, total} = await getPicturesByQuery(params);\nparams.maxPage = Math.ceil(total / params.pageSize)\nrenderImage(hits);\n\nif(hits.length > 0 && hits.length !== total) {\nshow(loadButton);\nhide(loader);\n\n}\nelse {\n  hide(loadButton);\n  hide(loader)\n}\n\n    }\n    catch (err) {\n    }\n     finally {\nform.reset()\n     }\n}\n\nasync function handleLoadMore(evt) {\n  params.page += 1;\nhide(loadButton);\nshow(loader);\n\ntry {\n  const {hits} = await getPicturesByQuery(params);\nrenderImage(hits);\n\nconst list = document.querySelector('.list');\nconst listHeight = list.getBoundingClientRect().height;\nwindow.scrollBy({\n  top: listHeight * 4,\n  behavior: \"smooth\"\n})\n}\ncatch (err) {\nconsole.log(err);\n}\nfinally {\n  hide(loader);\n  show(loadButton);\nif(params.page === params.maxPage) {\n  iziToast.show({\n    message: \"We're sorry, but you've reached the end of search results.\"\n  });\n  hide(loadButton);\n  loadButton.removeEventListener('click', handleLoadMore);\n}\n}\n}\n\n\nfunction hide(element){\n  element.style.display = 'none';\n}\n\nfunction show (element) {\n  element.style.display = 'flex';\n}\n\n"],"names":["gallery","lightbox","SimpleLightbox","renderImage","images","iziToast","listItems","largeImageURL","webformatURL","tags","likes","views","comments","downloads","BASE_URL","ENDPOINT","KEY","axios","getPicturesByQuery","q","page","pageSize","data","err","form","loader","loadButton","hide","handlerForm","handleLoadMore","params","evt","show","hits","total","listHeight","element"],"mappings":"owBAIA,MAAMA,EAAU,SAAS,cAAc,UAAU,EAEhD,IAAIC,EAAW,IAAIC,EAAe,aAC/B,CAAC,SAAU,GACX,MAAO,EAAI,CAAE,EAEV,SAASC,EAAYC,EAAQ,CAChC,GAAIA,EAAO,SAAW,EAClBC,EAAS,KAAK,CACV,QAAS,0EACrB,CAAW,EACHL,EAAQ,UAAY,OAEjB,CACP,MAAMM,EAAYF,EACjB,IAAI,CAAC,CAAC,cAAAG,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAM;AAAA,aACxEN,CAAa;AAAA,gBACVC,CAAY,UAAUC,CAAI;AAAA;AAAA,mCAEPC,CAAK;AAAA,oCACJC,CAAK;AAAA,uCACFC,CAAQ;AAAA,wCACPC,CAAS;AAAA;AAAA,QAEzC,EACH,KAAK,EAAE,EAEVb,EAAQ,mBAAmB,YAAaM,CAAS,EAC/CL,GACFA,EAAS,QAAO,CAEf,CAAA,CC/BH,MAAMa,EAAW,sBACXC,EAAW,OACXC,EAAM,qCAGZC,EAAM,SAAS,QAAUH,EAElB,SAASI,EAAmB,CAAC,EAAAC,EAAI,GAAI,KAAAC,EAAO,EAAG,SAAAC,EAAW,EAAE,EAAI,GAAI,CAEzE,OAAOJ,EAAM,IAAIF,EAAU,CACzB,OAAQ,CACZ,IAAKC,EACL,EAAAG,EACA,KAAAC,EACA,SAAUC,EACV,WAAY,QACZ,YAAa,aACb,WAAY,EACZ,CAAG,CAAC,EACD,KAAK,CAAC,CAAC,KAAAC,CAAI,IAAMA,CAAI,EACrB,MAAMC,GAAO,CAAC,QAAQ,IAAIA,CAAG,CAAC,CAAC,CAClC,CCnBA,MAAMC,EAAO,SAAS,cAAc,MAAM,EACpCxB,EAAU,SAAS,cAAc,UAAU,EAC3CyB,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,cAAc,EACxC,SAAS,cAAc,UAAU,EAEjDC,EAAKF,CAAM,EACXE,EAAKD,CAAU,EAEfF,EAAK,iBAAiB,SAAUI,CAAW,EAC3CF,EAAW,iBAAiB,QAASG,CAAc,EAEnD,MAAMC,EAAS,CACb,EAAG,GACL,KAAM,EACN,SAAW,GACX,QAAS,CACT,EAEA,eAAeF,EAAaG,EAAI,CAM7B,GALCA,EAAI,eAAgB,EACpB/B,EAAQ,UAAY,GACpB8B,EAAO,KAAO,EAChBA,EAAO,EAAIN,EAAK,SAAS,OAAO,MAAM,OAEjC,CAACM,EAAO,EAAG,CACdzB,EAAS,MAAM,CACb,MAAO,2BACb,CAAK,EACD,MAAO,CAEP2B,EAAKP,CAAM,EACXE,EAAKD,CAAU,EAEf,GAAG,CACP,KAAM,CAAC,KAAAO,EAAM,MAAAC,CAAK,EAAI,MAAMhB,EAAmBY,CAAM,EACrDA,EAAO,QAAU,KAAK,KAAKI,EAAQJ,EAAO,QAAQ,EAClD3B,EAAY8B,CAAI,EAEbA,EAAK,OAAS,GAAKA,EAAK,SAAWC,GACtCF,EAAKN,CAAU,EACfC,EAAKF,CAAM,IAITE,EAAKD,CAAU,EACfC,EAAKF,CAAM,EAGR,MACW,CACX,QACQ,CACbD,EAAK,MAAO,CACN,CACN,CAEA,eAAeK,EAAeE,EAAK,CACjCD,EAAO,MAAQ,EACjBH,EAAKD,CAAU,EACfM,EAAKP,CAAM,EAEX,GAAI,CACF,KAAM,CAAC,KAAAQ,CAAI,EAAI,MAAMf,EAAmBY,CAAM,EAChD3B,EAAY8B,CAAI,EAGhB,MAAME,EADO,SAAS,cAAc,OAAO,EACnB,sBAAuB,EAAC,OAChD,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACZ,CAAC,CACD,OACOZ,EAAK,CACZ,QAAQ,IAAIA,CAAG,CACf,QACA,CACEI,EAAKF,CAAM,EACXO,EAAKN,CAAU,EACdI,EAAO,OAASA,EAAO,UACxBzB,EAAS,KAAK,CACZ,QAAS,4DACb,CAAG,EACDsB,EAAKD,CAAU,EACfA,EAAW,oBAAoB,QAASG,CAAc,EAExD,CACA,CAGA,SAASF,EAAKS,EAAQ,CACpBA,EAAQ,MAAM,QAAU,MAC1B,CAEA,SAASJ,EAAMI,EAAS,CACtBA,EAAQ,MAAM,QAAU,MAC1B"}