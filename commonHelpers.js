import{S as w,i as f,a as p}from"./assets/vendor-c493984e.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function c(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=c(t);fetch(t.href,o)}})();const h=document.querySelector(".gallery");let m=new w(".gallery a",{docClose:!0,close:!0});function y(r){if(r.length===0)f.show({message:"Sorry, there are no images matching your search query. Please try again!"}),h.innerHTML="";else{const e=r.map(({largeImageURL:c,webformatURL:s,tags:t,likes:o,views:a,comments:S,downloads:q})=>`<li class="list">
  <a href="${c}">
    <img src='${s}' alt='${t}'/>
    <div class="item-wrap">
    <h2 class="item-text">Like<p>${o}</p></h2>
    <h2 class="item-text">Views<p>${a}</p></h2>
    <h2 class="item-text">Comments<p>${S}</p></h2>
    <h2 class="item-text">Downloads<p>${q}</p></h2>
  </div>
  </li>`).join("");h.insertAdjacentHTML("beforeend",e),m&&m.refresh()}}const x="https://pixabay.com",P="api/",$="44791676-0ec883c6e453828f8c76360bc";p.defaults.baseURL=x;function g({q:r="",page:e=1,pageSize:c=15}={}){return p.get(P,{params:{key:$,q:r,page:e,per_page:c,image_type:"photo",orientation:"horizontal",safesearch:!0}}).then(({data:s})=>s).catch(s=>{console.log(s)})}const d=document.querySelector("form"),E=document.querySelector(".gallery"),l=document.querySelector(".loader"),n=document.querySelector(".button-load");document.querySelector(".spinner");u(n);d.addEventListener("submit",O);const i={q:"",page:1,pageSize:15,maxPage:0};async function O(r){if(r.preventDefault(),E.innerHTML="",i.page=1,i.q=d.elements.search.value.trim(),!i.q){f.error({title:"Рядок не може бути пустим"});return}M(n),b(n,l);try{const{hits:e,total:c}=await g(i);i.maxPage=Math.ceil(c/i.pageSize),y(e),e.length>0&&e.length!==c?(v(n,l),n.addEventListener("click",L)):u(n)}catch{}finally{d.reset()}}async function L(r){i.page+=1,b(n,l);try{const{hits:e}=await g(i);y(e);const s=document.querySelector(".list").getBoundingClientRect().height;window.scrollBy({top:s*4,behavior:"smooth"})}catch(e){console.log(e)}finally{v(n,l),i.page===i.maxPage&&(console.log("We're sorry, but you've reached the end of search results."),u(n),n.removeEventListener("click",L))}}function u(r){r.classList.add("is-hidden")}function M(r){r.classList.remove("is-hidden")}function b(r,e){r.classList.add("is-hidden"),e.style.display="block"}function v(r,e){r.classList.remove("is-hidden"),e.style.display="none"}
//# sourceMappingURL=commonHelpers.js.map
